"use strict";(globalThis.webpackChunkbook=globalThis.webpackChunkbook||[]).push([[7879],{9609:(e,r,s)=>{s.r(r),s.d(r,{default:()=>d});var t=s(6540),a=s(3612),n=s(3689),o=s(6347);const l={authContainer:"authContainer_hGzV",authCard:"authCard_C3NM",authHeader:"authHeader_M6rH",logo:"logo_h3OC",authForm:"authForm_FJ_N",formGroup:"formGroup_sJeE",passwordContainer:"passwordContainer_auKG",eyeButton:"eyeButton_ZaM9",submitButton:"submitButton_bO9h",authFooter:"authFooter_gdw9",toggleButton:"toggleButton_Uqs3",error:"error_jJfI",inputError:"inputError_OVJS",fieldError:"fieldError_krWZ",passwordRequirements:"passwordRequirements_tnCY"};var i=s(6025),c=s(4848);function d(){const[e,r]=(0,t.useState)(!0),{login:s,signup:d}=(0,n.A)(),[u,h]=((0,o.W6)(),(0,t.useState)("")),[m,p]=(0,t.useState)(!1),g=(0,i.Ay)("/img/logo.png"),x=t.useRef(!0),[j,w]=(0,t.useState)(""),[v,k]=(0,t.useState)(""),[y,C]=(0,t.useState)(""),[b,f]=(0,t.useState)({});t.useEffect(()=>()=>{x.current=!1},[]);const[A,N]=(0,t.useState)(!1),[B,F]=(0,t.useState)(""),[S,_]=(0,t.useState)("");return(0,c.jsx)(a.A,{title:"Authentication",description:"Login or Signup",children:(0,c.jsx)("div",{className:l.authContainer,children:(0,c.jsxs)("div",{className:l.authCard,children:[(0,c.jsxs)("div",{className:l.authHeader,children:[(0,c.jsx)("img",{src:g,alt:"Logo",className:l.logo}),(0,c.jsx)("h2",{children:e?"Welcome Back":"Start Your Journey"}),(0,c.jsx)("p",{children:e?"Login to continue learning":"Create an account to personalize your experience"})]}),u&&(0,c.jsx)("div",{className:l.error,children:u}),(0,c.jsxs)("form",{onSubmit:async r=>{if(r.preventDefault(),x.current&&(h(""),_(""),f({})),(()=>{const r={},s=j.trim(),t=y.trim();return!e&&t.length<2&&(r.name="Name must be at least 2 characters"),(e=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e))(s)||(r.email="Please enter a valid email address"),v.length<8&&(r.password="Password must be at least 8 characters"),e||"weak"!==B||(r.password="Password is too weak. Add uppercase, numbers, and special characters"),f(r),0===Object.keys(r).length})()){x.current&&p(!0);try{return e?(await s(j.trim(),v),x.current=!1,void(window.location.href=(0,i.Ay)("/"))):(await d({email:j.trim(),password:v,name:y.trim()}),x.current=!1,void(window.location.href=(0,i.Ay)("/")))}catch(t){if(x.current){const e=t.message||"An error occurred";e.includes("Network")||e.includes("fetch")?h("Network error. Please check your internet connection and try again."):e.includes("already exists")||e.includes("duplicate")?h("This email is already registered. Please login or use a different email."):e.includes("Invalid")||e.includes("incorrect")?h("Invalid email or password. Please try again."):e.includes("500")||e.includes("server")?h("Server error. Please try again later."):h(e)}}finally{x.current&&p(!1)}}},className:l.authForm,children:[!e&&(0,c.jsxs)("div",{className:l.formGroup,children:[(0,c.jsx)("label",{children:"Full Name"}),(0,c.jsx)("input",{type:"text",value:y,onChange:e=>{C(e.target.value),f(e=>({...e,name:""}))},required:!0,disabled:m,placeholder:"John Doe",className:b.name?l.inputError:""}),b.name&&(0,c.jsx)("span",{className:l.fieldError,children:b.name})]}),(0,c.jsxs)("div",{className:l.formGroup,children:[(0,c.jsx)("label",{children:"Email Address"}),(0,c.jsx)("input",{type:"email",value:j,onChange:e=>{w(e.target.value),f(e=>({...e,email:""}))},required:!0,disabled:m,placeholder:"john@example.com",className:b.email?l.inputError:""}),b.email&&(0,c.jsx)("span",{className:l.fieldError,children:b.email})]}),(0,c.jsxs)("div",{className:l.formGroup,children:[(0,c.jsx)("label",{children:"Password"}),(0,c.jsxs)("div",{className:l.passwordContainer,children:[(0,c.jsx)("input",{type:A?"text":"password",value:v,onChange:r=>{const s=r.target.value;k(s),f(e=>({...e,password:""})),e||F((e=>{if(0===e.length)return"";let r=0;return e.length>=8&&r++,/[A-Z]/.test(e)&&r++,/[a-z]/.test(e)&&r++,/[0-9]/.test(e)&&r++,/[^A-Za-z0-9]/.test(e)&&r++,r>=4?"strong":r>=2?"moderate":"weak"})(s))},required:!0,disabled:m,placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",className:b.password?l.inputError:""}),(0,c.jsx)("button",{type:"button",className:l.eyeButton,style:{color:e?"#9CA3AF":"strong"===B?"#10B981":"moderate"===B?"#F59E0B":"weak"===B?"#EF4444":"#9CA3AF"},onClick:()=>N(!A),disabled:m,children:A?(0,c.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,c.jsx)("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),(0,c.jsx)("circle",{cx:"12",cy:"12",r:"3"}),(0,c.jsx)("path",{d:"M12 10v4",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"}),(0,c.jsx)("path",{d:"M10 12h4",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})]}):(0,c.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,c.jsx)("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),(0,c.jsx)("circle",{cx:"12",cy:"12",r:"3"})]})})]}),b.password&&(0,c.jsx)("span",{className:l.fieldError,children:b.password}),!e&&v.length>0&&(0,c.jsxs)("div",{className:l.passwordRequirements,children:[(0,c.jsx)("small",{style:{color:v.length>=8?"#10B981":"#9CA3AF"},children:"\u2713 At least 8 characters"}),(0,c.jsx)("small",{style:{color:/[A-Z]/.test(v)?"#10B981":"#9CA3AF"},children:"\u2713 One uppercase letter"}),(0,c.jsx)("small",{style:{color:/[0-9]/.test(v)?"#10B981":"#9CA3AF"},children:"\u2713 One number"}),(0,c.jsx)("small",{style:{color:/[^A-Za-z0-9]/.test(v)?"#10B981":"#9CA3AF"},children:"\u2713 One special character"})]})]}),(0,c.jsx)("button",{type:"submit",className:l.submitButton,disabled:m,children:m?"Processing...":e?"Login":"Create Account"})]}),(0,c.jsx)("div",{className:l.authFooter,children:(0,c.jsxs)("p",{children:[e?"Don't have an account? ":"Already have an account? ",(0,c.jsx)("button",{className:l.toggleButton,onClick:()=>r(!e),children:e?"Sign Up":"Login"})]})})]})})})}}}]);