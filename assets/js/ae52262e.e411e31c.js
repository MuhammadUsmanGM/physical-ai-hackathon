"use strict";(globalThis.webpackChunkbook=globalThis.webpackChunkbook||[]).push([[5107],{8059:(n,e,r)=>{r.r(e),r.d(e,{assets:()=>s,contentTitle:()=>l,default:()=>p,frontMatter:()=>o,metadata:()=>a,toc:()=>c});const a=JSON.parse('{"id":"The-AI-Robot-Brain/Nav2-Bipedal-Navigation/nav2-bipedal-navigation","title":"Nav2 for Bipedal Navigation","description":"Introduction","source":"@site/docs/04-The-AI-Robot-Brain/03-Nav2-Bipedal-Navigation/index.md","sourceDirName":"04-The-AI-Robot-Brain/03-Nav2-Bipedal-Navigation","slug":"/module-04/nav2-bipedal-navigation","permalink":"/physical-ai-hackathon/docs/module-04/nav2-bipedal-navigation","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/04-The-AI-Robot-Brain/03-Nav2-Bipedal-Navigation/index.md","tags":[],"version":"current","frontMatter":{"id":"nav2-bipedal-navigation","title":"Nav2 for Bipedal Navigation","slug":"/module-04/nav2-bipedal-navigation"},"sidebar":"tutorialSidebar","previous":{"title":"Isaac ROS and Perception","permalink":"/physical-ai-hackathon/docs/module-04/isaac-ros-perception"},"next":{"title":"Reinforcement Learning for Robot Control","permalink":"/physical-ai-hackathon/docs/module-04/rl-robot-control"}}');var t=r(4848),i=r(8453);const o={id:"nav2-bipedal-navigation",title:"Nav2 for Bipedal Navigation",slug:"/module-04/nav2-bipedal-navigation"},l="Nav2 for Bipedal Navigation",s={},c=[{value:"Introduction",id:"introduction",level:2},{value:"Nav2 Architecture for Humanoids",id:"nav2-architecture-for-humanoids",level:2},{value:"Key Differences: Wheeled vs. Bipedal Navigation",id:"key-differences-wheeled-vs-bipedal-navigation",level:2},{value:"Nav2 Installation and Setup",id:"nav2-installation-and-setup",level:2},{value:"1. Install Nav2",id:"1-install-nav2",level:3},{value:"2. Create Nav2 Configuration Package",id:"2-create-nav2-configuration-package",level:3},{value:"Configuring Nav2 for Humanoids",id:"configuring-nav2-for-humanoids",level:2},{value:"1. Robot Footprint",id:"1-robot-footprint",level:3},{value:"2. Costmap Configuration",id:"2-costmap-configuration",level:3},{value:"3. Global Costmap",id:"3-global-costmap",level:3},{value:"4. Local Costmap",id:"4-local-costmap",level:3},{value:"Planner Configuration",id:"planner-configuration",level:2},{value:"Global Planner (NavFn)",id:"global-planner-navfn",level:3},{value:"Local Planner (DWB)",id:"local-planner-dwb",level:3},{value:"Footstep Planner Integration",id:"footstep-planner-integration",level:2},{value:"Launch File",id:"launch-file",level:2},{value:"Running Navigation",id:"running-navigation",level:2},{value:"Best Practices for Humanoid Navigation",id:"best-practices-for-humanoid-navigation",level:2},{value:"\u2705 DO:",id:"-do",level:3},{value:"\u274c DON&#39;T:",id:"-dont",level:3},{value:"Summary",id:"summary",level:2},{value:"Further Reading",id:"further-reading",level:2}];function d(n){const e={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...n.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(e.header,{children:(0,t.jsx)(e.h1,{id:"nav2-for-bipedal-navigation",children:"Nav2 for Bipedal Navigation"})}),"\n",(0,t.jsx)(e.h2,{id:"introduction",children:"Introduction"}),"\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:"Nav2"})," (Navigation2) is the ROS 2 navigation stack that enables autonomous robot navigation. While originally designed for wheeled robots, Nav2 can be adapted for ",(0,t.jsx)(e.strong,{children:"bipedal humanoid robots"})," with special considerations for balance, footstep planning, and dynamic stability. This chapter shows how to configure Nav2 for humanoid locomotion."]}),"\n",(0,t.jsx)(e.h2,{id:"nav2-architecture-for-humanoids",children:"Nav2 Architecture for Humanoids"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-mermaid",children:'graph TB\r\n    subgraph "Perception"\r\n        LIDAR[LiDAR/Cameras]\r\n        COSTMAP[Costmap 2D]\r\n    end\r\n    \r\n    subgraph "Localization"\r\n        AMCL[AMCL / VSLAM]\r\n        TF[TF Tree]\r\n    end\r\n    \r\n    subgraph "Planning"\r\n        GLOBAL[Global Planner]\r\n        LOCAL[Local Planner]\r\n        FOOTSTEP[Footstep Planner]\r\n    end\r\n    \r\n    subgraph "Control"\r\n        CONTROLLER[Controller Server]\r\n        BALANCE[Balance Controller]\r\n        JOINTS[Joint Controllers]\r\n    end\r\n    \r\n    subgraph "Behavior"\r\n        BT[Behavior Trees]\r\n        RECOVERY[Recovery Behaviors]\r\n    end\r\n    \r\n    LIDAR --\x3e COSTMAP\r\n    COSTMAP --\x3e GLOBAL\r\n    COSTMAP --\x3e LOCAL\r\n    AMCL --\x3e TF\r\n    TF --\x3e GLOBAL\r\n    GLOBAL --\x3e LOCAL\r\n    LOCAL --\x3e FOOTSTEP\r\n    FOOTSTEP --\x3e CONTROLLER\r\n    CONTROLLER --\x3e BALANCE\r\n    BALANCE --\x3e JOINTS\r\n    BT --\x3e GLOBAL\r\n    BT --\x3e RECOVERY\n'})}),"\n",(0,t.jsx)(e.hr,{}),"\n",(0,t.jsx)(e.h2,{id:"key-differences-wheeled-vs-bipedal-navigation",children:"Key Differences: Wheeled vs. Bipedal Navigation"}),"\n",(0,t.jsxs)(e.table,{children:[(0,t.jsx)(e.thead,{children:(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.th,{children:"Aspect"}),(0,t.jsx)(e.th,{children:"Wheeled Robots"}),(0,t.jsx)(e.th,{children:"Bipedal Humanoids"})]})}),(0,t.jsxs)(e.tbody,{children:[(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:(0,t.jsx)(e.strong,{children:"Motion"})}),(0,t.jsx)(e.td,{children:"Continuous"}),(0,t.jsx)(e.td,{children:"Discrete footsteps"})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:(0,t.jsx)(e.strong,{children:"Stability"})}),(0,t.jsx)(e.td,{children:"Static"}),(0,t.jsx)(e.td,{children:"Dynamic"})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:(0,t.jsx)(e.strong,{children:"Planning"})}),(0,t.jsx)(e.td,{children:"Path planning"}),(0,t.jsx)(e.td,{children:"Footstep planning"})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:(0,t.jsx)(e.strong,{children:"Control"})}),(0,t.jsx)(e.td,{children:"Velocity commands"}),(0,t.jsx)(e.td,{children:"Joint trajectories"})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:(0,t.jsx)(e.strong,{children:"Recovery"})}),(0,t.jsx)(e.td,{children:"Rotate in place"}),(0,t.jsx)(e.td,{children:"Complex balancing"})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:(0,t.jsx)(e.strong,{children:"Speed"})}),(0,t.jsx)(e.td,{children:"Constant"}),(0,t.jsx)(e.td,{children:"Variable (gait-dependent)"})]})]})]}),"\n",(0,t.jsx)(e.hr,{}),"\n",(0,t.jsx)(e.h2,{id:"nav2-installation-and-setup",children:"Nav2 Installation and Setup"}),"\n",(0,t.jsx)(e.h3,{id:"1-install-nav2",children:"1. Install Nav2"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-bash",children:"# Install Nav2 packages\r\nsudo apt install ros-humble-navigation2 ros-humble-nav2-bringup\r\n\r\n# Install additional dependencies\r\nsudo apt install ros-humble-slam-toolbox\r\nsudo apt install ros-humble-robot-localization\n"})}),"\n",(0,t.jsx)(e.h3,{id:"2-create-nav2-configuration-package",children:"2. Create Nav2 Configuration Package"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-bash",children:"cd ~/ros2_ws/src\r\nros2 pkg create --build-type ament_python humanoid_navigation \\\r\n  --dependencies rclpy nav2_msgs geometry_msgs tf2_ros\r\n\r\ncd humanoid_navigation\r\nmkdir -p config maps launch\n"})}),"\n",(0,t.jsx)(e.hr,{}),"\n",(0,t.jsx)(e.h2,{id:"configuring-nav2-for-humanoids",children:"Configuring Nav2 for Humanoids"}),"\n",(0,t.jsx)(e.h3,{id:"1-robot-footprint",children:"1. Robot Footprint"}),"\n",(0,t.jsx)(e.p,{children:"Define the robot's footprint (ground contact area):"}),"\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.code,{children:"config/humanoid_footprint.yaml"}),":"]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-yaml",children:"footprint: [\r\n  [0.15, 0.10],   # Front-right\r\n  [0.15, -0.10],  # Front-left\r\n  [-0.15, -0.10], # Back-left\r\n  [-0.15, 0.10]   # Back-right\r\n]\r\n\r\n# For circular approximation\r\nrobot_radius: 0.20  # meters\n"})}),"\n",(0,t.jsx)(e.h3,{id:"2-costmap-configuration",children:"2. Costmap Configuration"}),"\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.code,{children:"config/costmap_common.yaml"}),":"]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-yaml",children:'costmap_common_params:\r\n  footprint: "[[0.15, 0.10], [0.15, -0.10], [-0.15, -0.10], [-0.15, 0.10]]"\r\n  robot_radius: 0.20\r\n  \r\n  # Obstacle layer\r\n  obstacle_layer:\r\n    enabled: True\r\n    observation_sources: scan\r\n    scan:\r\n      topic: /scan\r\n      max_obstacle_height: 2.0\r\n      min_obstacle_height: 0.0\r\n      obstacle_max_range: 5.0\r\n      obstacle_min_range: 0.0\r\n      raytrace_max_range: 6.0\r\n      raytrace_min_range: 0.0\r\n      clearing: True\r\n      marking: True\r\n      data_type: "LaserScan"\r\n  \r\n  # Inflation layer (larger for humanoids - need more clearance)\r\n  inflation_layer:\r\n    enabled: True\r\n    inflation_radius: 0.55  # Larger than wheeled robots\r\n    cost_scaling_factor: 3.0\r\n  \r\n  # Static layer\r\n  static_layer:\r\n    enabled: True\r\n    map_topic: /map\n'})}),"\n",(0,t.jsx)(e.h3,{id:"3-global-costmap",children:"3. Global Costmap"}),"\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.code,{children:"config/global_costmap.yaml"}),":"]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-yaml",children:'global_costmap:\r\n  global_costmap:\r\n    ros__parameters:\r\n      update_frequency: 1.0\r\n      publish_frequency: 1.0\r\n      global_frame: map\r\n      robot_base_frame: base_link\r\n      use_sim_time: False\r\n      \r\n      resolution: 0.05\r\n      track_unknown_space: True\r\n      \r\n      plugins: ["static_layer", "obstacle_layer", "inflation_layer"]\r\n      \r\n      static_layer:\r\n        plugin: "nav2_costmap_2d::StaticLayer"\r\n        map_subscribe_transient_local: True\r\n      \r\n      obstacle_layer:\r\n        plugin: "nav2_costmap_2d::ObstacleLayer"\r\n        enabled: True\r\n        observation_sources: scan\r\n        scan:\r\n          topic: /scan\r\n          max_obstacle_height: 2.0\r\n          clearing: True\r\n          marking: True\r\n          data_type: "LaserScan"\r\n      \r\n      inflation_layer:\r\n        plugin: "nav2_costmap_2d::InflationLayer"\r\n        cost_scaling_factor: 3.0\r\n        inflation_radius: 0.55\n'})}),"\n",(0,t.jsx)(e.h3,{id:"4-local-costmap",children:"4. Local Costmap"}),"\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.code,{children:"config/local_costmap.yaml"}),":"]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-yaml",children:'local_costmap:\r\n  local_costmap:\r\n    ros__parameters:\r\n      update_frequency: 5.0  # Higher for dynamic stability\r\n      publish_frequency: 2.0\r\n      global_frame: odom\r\n      robot_base_frame: base_link\r\n      use_sim_time: False\r\n      rolling_window: True\r\n      width: 3\r\n      height: 3\r\n      resolution: 0.05\r\n      \r\n      plugins: ["obstacle_layer", "inflation_layer"]\r\n      \r\n      obstacle_layer:\r\n        plugin: "nav2_costmap_2d::ObstacleLayer"\r\n        enabled: True\r\n        observation_sources: scan\r\n        scan:\r\n          topic: /scan\r\n          max_obstacle_height: 2.0\r\n          clearing: True\r\n          marking: True\r\n          data_type: "LaserScan"\r\n      \r\n      inflation_layer:\r\n        plugin: "nav2_costmap_2d::InflationLayer"\r\n        cost_scaling_factor: 3.0\r\n        inflation_radius: 0.55\n'})}),"\n",(0,t.jsx)(e.hr,{}),"\n",(0,t.jsx)(e.h2,{id:"planner-configuration",children:"Planner Configuration"}),"\n",(0,t.jsx)(e.h3,{id:"global-planner-navfn",children:"Global Planner (NavFn)"}),"\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.code,{children:"config/planner_server.yaml"}),":"]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-yaml",children:'planner_server:\r\n  ros__parameters:\r\n    expected_planner_frequency: 1.0  # Lower for humanoids\r\n    use_sim_time: False\r\n    \r\n    planner_plugins: ["GridBased"]\r\n    \r\n    GridBased:\r\n      plugin: "nav2_navfn_planner/NavfnPlanner"\r\n      tolerance: 0.15  # Larger tolerance for humanoids\r\n      use_astar: True\r\n      allow_unknown: True\n'})}),"\n",(0,t.jsx)(e.h3,{id:"local-planner-dwb",children:"Local Planner (DWB)"}),"\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.code,{children:"config/controller_server.yaml"}),":"]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-yaml",children:'controller_server:\r\n  ros__parameters:\r\n    controller_frequency: 10.0  # Lower than wheeled robots\r\n    min_x_velocity_threshold: 0.01\r\n    min_y_velocity_threshold: 0.01\r\n    min_theta_velocity_threshold: 0.01\r\n    \r\n    progress_checker_plugin: "progress_checker"\r\n    goal_checker_plugins: ["goal_checker"]\r\n    controller_plugins: ["FollowPath"]\r\n    \r\n    progress_checker:\r\n      plugin: "nav2_controller::SimpleProgressChecker"\r\n      required_movement_radius: 0.3  # Larger for humanoids\r\n      movement_time_allowance: 20.0  # More time for walking\r\n    \r\n    goal_checker:\r\n      plugin: "nav2_controller::SimpleGoalChecker"\r\n      xy_goal_tolerance: 0.15  # Larger tolerance\r\n      yaw_goal_tolerance: 0.2\r\n      stateful: True\r\n    \r\n    FollowPath:\r\n      plugin: "dwb_core::DWBLocalPlanner"\r\n      \r\n      # Velocity limits (much slower than wheeled robots)\r\n      min_vel_x: 0.0\r\n      max_vel_x: 0.5  # 0.5 m/s max walking speed\r\n      min_vel_y: 0.0\r\n      max_vel_y: 0.0  # No lateral movement for humanoids\r\n      max_vel_theta: 0.5  # Slow turning\r\n      min_speed_xy: 0.0\r\n      max_speed_xy: 0.5\r\n      min_speed_theta: 0.0\r\n      \r\n      # Acceleration limits (conservative for stability)\r\n      acc_lim_x: 0.3\r\n      acc_lim_y: 0.0\r\n      acc_lim_theta: 0.5\r\n      decel_lim_x: -0.3\r\n      decel_lim_y: 0.0\r\n      decel_lim_theta: -0.5\r\n      \r\n      # Trajectory generation\r\n      vx_samples: 10\r\n      vy_samples: 1  # No lateral movement\r\n      vtheta_samples: 20\r\n      sim_time: 2.0  # Longer prediction horizon\r\n      \r\n      # Scoring\r\n      path_distance_bias: 32.0\r\n      goal_distance_bias: 24.0\r\n      occdist_scale: 0.01\r\n      forward_point_distance: 0.325\r\n      stop_time_buffer: 0.5  # More buffer for humanoids\r\n      \r\n      # Oscillation prevention\r\n      oscillation_reset_dist: 0.05\r\n      oscillation_reset_angle: 0.2\n'})}),"\n",(0,t.jsx)(e.hr,{}),"\n",(0,t.jsx)(e.h2,{id:"footstep-planner-integration",children:"Footstep Planner Integration"}),"\n",(0,t.jsx)(e.p,{children:"For true bipedal navigation, integrate a footstep planner:"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-python",children:'#!/usr/bin/env python3\r\n"""\r\nFootstep planner for humanoid navigation\r\n"""\r\n\r\nimport rclpy\r\nfrom rclpy.node import Node\r\nfrom nav_msgs.msg import Path\r\nfrom geometry_msgs.msg import PoseStamped, Pose2D\r\nimport numpy as np\r\n\r\nclass FootstepPlanner(Node):\r\n    """\r\n    Converts Nav2 path to footstep sequence for humanoid.\r\n    """\r\n    \r\n    def __init__(self):\r\n        super().__init__(\'footstep_planner\')\r\n        \r\n        # Parameters\r\n        self.declare_parameter(\'step_length\', 0.3)  # meters\r\n        self.declare_parameter(\'step_width\', 0.2)   # meters\r\n        self.declare_parameter(\'step_height\', 0.05) # meters\r\n        \r\n        self.step_length = self.get_parameter(\'step_length\').value\r\n        self.step_width = self.get_parameter(\'step_width\').value\r\n        self.step_height = self.get_parameter(\'step_height\').value\r\n        \r\n        # Subscribe to Nav2 global path\r\n        self.path_sub = self.create_subscription(\r\n            Path,\r\n            \'/plan\',\r\n            self.path_callback,\r\n            10\r\n        )\r\n        \r\n        # Publish footstep sequence\r\n        self.footstep_pub = self.create_publisher(\r\n            FootstepArray,  # Custom message type\r\n            \'/footsteps\',\r\n            10\r\n        )\r\n        \r\n        self.get_logger().info(\'Footstep Planner initialized\')\r\n    \r\n    def path_callback(self, path_msg):\r\n        """Convert path to footsteps"""\r\n        footsteps = self.generate_footsteps(path_msg)\r\n        self.publish_footsteps(footsteps)\r\n    \r\n    def generate_footsteps(self, path):\r\n        """\r\n        Generate footstep sequence from path.\r\n        \r\n        Args:\r\n            path (Path): Nav2 path message\r\n            \r\n        Returns:\r\n            list: List of footstep poses\r\n        """\r\n        footsteps = []\r\n        current_foot = \'left\'  # Start with left foot\r\n        \r\n        # Simplify path to waypoints\r\n        waypoints = self.simplify_path(path)\r\n        \r\n        for i in range(len(waypoints) - 1):\r\n            start = waypoints[i]\r\n            end = waypoints[i + 1]\r\n            \r\n            # Calculate number of steps needed\r\n            distance = self.distance(start, end)\r\n            num_steps = int(np.ceil(distance / self.step_length))\r\n            \r\n            # Generate steps along segment\r\n            for step in range(num_steps):\r\n                # Interpolate position\r\n                t = (step + 1) / num_steps\r\n                x = start.x + t * (end.x - start.x)\r\n                y = start.y + t * (end.y - start.y)\r\n                \r\n                # Alternate feet\r\n                if current_foot == \'left\':\r\n                    y_offset = self.step_width / 2\r\n                    current_foot = \'right\'\r\n                else:\r\n                    y_offset = -self.step_width / 2\r\n                    current_foot = \'left\'\r\n                \r\n                # Create footstep\r\n                footstep = Footstep()\r\n                footstep.x = x\r\n                footstep.y = y + y_offset\r\n                footstep.theta = self.calculate_heading(start, end)\r\n                footstep.foot = current_foot\r\n                \r\n                footsteps.append(footstep)\r\n        \r\n        return footsteps\r\n    \r\n    def simplify_path(self, path):\r\n        """Simplify path to key waypoints"""\r\n        # Douglas-Peucker algorithm or similar\r\n        # For now, just downsample\r\n        waypoints = []\r\n        for i in range(0, len(path.poses), 5):\r\n            waypoints.append(path.poses[i].pose.position)\r\n        return waypoints\r\n    \r\n    def distance(self, p1, p2):\r\n        """Calculate 2D distance"""\r\n        return np.sqrt((p2.x - p1.x)**2 + (p2.y - p1.y)**2)\r\n    \r\n    def calculate_heading(self, p1, p2):\r\n        """Calculate heading angle"""\r\n        return np.arctan2(p2.y - p1.y, p2.x - p1.x)\r\n\r\ndef main(args=None):\r\n    rclpy.init(args=args)\r\n    planner = FootstepPlanner()\r\n    rclpy.spin(planner)\r\n    planner.destroy_node()\r\n    rclpy.shutdown()\r\n\r\nif __name__ == \'__main__\':\r\n    main()\n'})}),"\n",(0,t.jsx)(e.hr,{}),"\n",(0,t.jsx)(e.h2,{id:"launch-file",children:"Launch File"}),"\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.code,{children:"launch/humanoid_navigation.launch.py"}),":"]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-python",children:"from launch import LaunchDescription\r\nfrom launch_ros.actions import Node\r\nfrom launch.actions import IncludeLaunchDescription\r\nfrom launch.launch_description_sources import PythonLaunchDescriptionSource\r\nfrom ament_index_python.packages import get_package_share_directory\r\nimport os\r\n\r\ndef generate_launch_description():\r\n    pkg_share = get_package_share_directory('humanoid_navigation')\r\n    nav2_bringup_dir = get_package_share_directory('nav2_bringup')\r\n    \r\n    # Configuration files\r\n    params_file = os.path.join(pkg_share, 'config', 'nav2_params.yaml')\r\n    map_file = os.path.join(pkg_share, 'maps', 'office.yaml')\r\n    \r\n    return LaunchDescription([\r\n        # Map Server\r\n        Node(\r\n            package='nav2_map_server',\r\n            executable='map_server',\r\n            name='map_server',\r\n            output='screen',\r\n            parameters=[{'yaml_filename': map_file}]\r\n        ),\r\n        \r\n        # AMCL (Localization)\r\n        Node(\r\n            package='nav2_amcl',\r\n            executable='amcl',\r\n            name='amcl',\r\n            output='screen',\r\n            parameters=[params_file]\r\n        ),\r\n        \r\n        # Planner Server\r\n        Node(\r\n            package='nav2_planner',\r\n            executable='planner_server',\r\n            name='planner_server',\r\n            output='screen',\r\n            parameters=[params_file]\r\n        ),\r\n        \r\n        # Controller Server\r\n        Node(\r\n            package='nav2_controller',\r\n            executable='controller_server',\r\n            name='controller_server',\r\n            output='screen',\r\n            parameters=[params_file]\r\n        ),\r\n        \r\n        # Behavior Server\r\n        Node(\r\n            package='nav2_behaviors',\r\n            executable='behavior_server',\r\n            name='behavior_server',\r\n            output='screen',\r\n            parameters=[params_file]\r\n        ),\r\n        \r\n        # BT Navigator\r\n        Node(\r\n            package='nav2_bt_navigator',\r\n            executable='bt_navigator',\r\n            name='bt_navigator',\r\n            output='screen',\r\n            parameters=[params_file]\r\n        ),\r\n        \r\n        # Lifecycle Manager\r\n        Node(\r\n            package='nav2_lifecycle_manager',\r\n            executable='lifecycle_manager',\r\n            name='lifecycle_manager_navigation',\r\n            output='screen',\r\n            parameters=[{\r\n                'autostart': True,\r\n                'node_names': [\r\n                    'map_server',\r\n                    'amcl',\r\n                    'planner_server',\r\n                    'controller_server',\r\n                    'behavior_server',\r\n                    'bt_navigator'\r\n                ]\r\n            }]\r\n        ),\r\n        \r\n        # Footstep Planner (custom)\r\n        Node(\r\n            package='humanoid_navigation',\r\n            executable='footstep_planner',\r\n            name='footstep_planner',\r\n            output='screen',\r\n            parameters=[{\r\n                'step_length': 0.3,\r\n                'step_width': 0.2,\r\n                'step_height': 0.05\r\n            }]\r\n        ),\r\n    ])\n"})}),"\n",(0,t.jsx)(e.hr,{}),"\n",(0,t.jsx)(e.h2,{id:"running-navigation",children:"Running Navigation"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-bash",children:"# 1. Launch the robot (simulation or real)\r\nros2 launch humanoid_robot robot_bringup.launch.py\r\n\r\n# 2. Launch navigation\r\nros2 launch humanoid_navigation humanoid_navigation.launch.py\r\n\r\n# 3. Launch RViz with Nav2 panel\r\nros2 launch nav2_bringup rviz_launch.py\r\n\r\n# 4. Set initial pose in RViz (2D Pose Estimate)\r\n# 5. Set navigation goal (2D Goal Pose)\n"})}),"\n",(0,t.jsx)(e.hr,{}),"\n",(0,t.jsx)(e.h2,{id:"best-practices-for-humanoid-navigation",children:"Best Practices for Humanoid Navigation"}),"\n",(0,t.jsx)(e.h3,{id:"-do",children:"\u2705 DO:"}),"\n",(0,t.jsxs)(e.ol,{children:["\n",(0,t.jsxs)(e.li,{children:["\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"Conservative Parameters"})}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"Lower max velocities (0.3-0.5 m/s)"}),"\n",(0,t.jsx)(e.li,{children:"Larger inflation radius"}),"\n",(0,t.jsx)(e.li,{children:"More time allowances"}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(e.li,{children:["\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"Balance Monitoring"})}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"Integrate IMU feedback"}),"\n",(0,t.jsx)(e.li,{children:"Emergency stop on instability"}),"\n",(0,t.jsx)(e.li,{children:"Recovery behaviors for balance"}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(e.li,{children:["\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"Footstep Planning"})}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"Use dedicated footstep planner"}),"\n",(0,t.jsx)(e.li,{children:"Validate footsteps for stability"}),"\n",(0,t.jsx)(e.li,{children:"Consider terrain"}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(e.li,{children:["\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"Safety First"})}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"Test in simulation first"}),"\n",(0,t.jsx)(e.li,{children:"Start with simple environments"}),"\n",(0,t.jsx)(e.li,{children:"Gradual speed increases"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(e.h3,{id:"-dont",children:"\u274c DON'T:"}),"\n",(0,t.jsxs)(e.ol,{children:["\n",(0,t.jsxs)(e.li,{children:["\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"Don't Use Wheeled Robot Parameters"})}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"Too fast, too aggressive"}),"\n",(0,t.jsx)(e.li,{children:"Will cause falls"}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(e.li,{children:["\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"Don't Ignore Balance"})}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"Nav2 doesn't know about bipedal stability"}),"\n",(0,t.jsx)(e.li,{children:"Need additional balance controller"}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(e.li,{children:["\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"Don't Skip Validation"})}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"Validate each footstep"}),"\n",(0,t.jsx)(e.li,{children:"Check for obstacles in foot placement"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(e.hr,{}),"\n",(0,t.jsx)(e.h2,{id:"summary",children:"Summary"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"Nav2 can be adapted for humanoid robots"}),"\n",(0,t.jsx)(e.li,{children:"Requires conservative parameters"}),"\n",(0,t.jsx)(e.li,{children:"Footstep planning is essential"}),"\n",(0,t.jsx)(e.li,{children:"Balance control must be integrated"}),"\n",(0,t.jsx)(e.li,{children:"Safety monitoring is critical"}),"\n"]}),"\n",(0,t.jsx)(e.p,{children:"Nav2 provides a solid foundation for humanoid navigation when properly configured and integrated with bipedal-specific controllers."}),"\n",(0,t.jsx)(e.hr,{}),"\n",(0,t.jsx)(e.h2,{id:"further-reading",children:"Further Reading"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:(0,t.jsx)(e.a,{href:"https://navigation.ros.org/",children:"Nav2 Documentation"})}),"\n",(0,t.jsx)(e.li,{children:(0,t.jsx)(e.a,{href:"https://ieeexplore.ieee.org/document/8593885",children:"Humanoid Footstep Planning"})}),"\n",(0,t.jsx)(e.li,{children:(0,t.jsx)(e.a,{href:"https://github.com/ami-iit/bipedal-locomotion-framework",children:"Bipedal Locomotion Framework"})}),"\n",(0,t.jsx)(e.li,{children:(0,t.jsx)(e.a,{href:"https://navigation.ros.org/tutorials/index.html",children:"Nav2 Tutorials"})}),"\n"]})]})}function p(n={}){const{wrapper:e}={...(0,i.R)(),...n.components};return e?(0,t.jsx)(e,{...n,children:(0,t.jsx)(d,{...n})}):d(n)}},8453:(n,e,r)=>{r.d(e,{R:()=>o,x:()=>l});var a=r(6540);const t={},i=a.createContext(t);function o(n){const e=a.useContext(i);return a.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function l(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(t):n.components||t:o(n.components),a.createElement(i.Provider,{value:e},n.children)}}}]);